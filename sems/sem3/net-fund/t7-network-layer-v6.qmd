---
title: "Presentation Title"
---
# Topic 7: Network Layer

# Introduction to Networks  v7.0 (ITN)

::: {.notes}

Cisco Networking Academy Program
Introduction to Networks v7.0 (ITN)
Module 8: Protocols and Modules


:::

# Topics

| __Topic Title__ | __Topic Objective__ |
| :-: | :-: |
| __Network Layer Characteristics__ | Explain how the network layer uses IP protocols for reliable communications\. |
| __IPv4 Packet__ | Explain the role of the major header fields in the IPv4 packet\. |
| __IPv6 Packet__ | Explain the role of the major header fields in the IPv6 packet\. |
| __How a Host Routes__ | Explain how host devices use routing tables to direct packets |
| __Introduction to Routing__ | Explain how router use routing tables to forward packets\. |
| __Basic Router Configuration__ | Configure initial settings\, interfaces and default gateway |

::: {.notes}

8 – Network Layer
8.0 – Introduction
8.0.2 – What will I learn to do in this module?


:::

# Network Layer CharacteristicsThe Network Layer

![](t7-network-layer-img/t7-network-layer-v6_0.png)



* Provides services to allow end devices to exchange data\.
* IP version 4 \(IPv4\) and IP version 6 \(IPv6\) are the principle network layer communication protocols\.
* <span style="color:#ff0000">The network layer performs four basic operations:</span>
  * Addressing end devices
  * Encapsulation
  * Routing
  * De\-encapsulation
::: {.notes}

8 – Network Layer
8.1 – Network Layer Characteristics
8.1.1 –  The Network Layer

:::

# Network Layer CharacteristicsIP Encapsulation

![](t7-network-layer-img/t7-network-layer-v6_1.png)

<span style="color:#0033cc">IP encapsulates the transport layer segment\.</span>

<span style="color:#0033cc">IP packet will be examined by all layer 3 devices as it traverses the network\.</span>

<span style="color:#ff0000">The IP addressing does not change from source to destination\.</span>

::: {.notes}

8 – Network Layer
8.1 – Network Layer Characteristics
8.1.2 – IP Encapsulation


:::

# Network Layer CharacteristicsConnectionless

_IP is Connectionless \- There is no connection with the destination established before sending data packets\._

Connectionless communication is conceptually  <span style="color:#ff0000">similar to sending a letter </span> to someone without notifying the recipient in advance\.

IP requires no initial exchange of control information to establish an end\-to\-end connection before packets are forwarded\.

![](t7-network-layer-img/t7-network-layer-v6_2.png)

![](t7-network-layer-img/t7-network-layer-v6_3.png)

::: {.notes}

8 – Network Layer
8.1 – Network Layer Characteristics
8.1.4 – Connectionless

:::

# Network Layer CharacteristicsBest Effort

_IP is Best Effort \- IP is inherently unreliable because packet delivery is not guaranteed\._

![](t7-network-layer-img/t7-network-layer-v6_4.png)



* With no pre\-established end\-to\-end connection\, senders are unaware whether destination devices:
  * Are present and functional when sending packets\,
  * Receives the packet
  * Are able to access and read the packet\.
* <span style="color:#ff0000">The IP protocol was not designed to track and manage the flow of packets\. These functions\, if required\, are performed by other protocols at other layers\, primarily TCP at Layer 4\.</span>
::: {.notes}

8 – Network Layer
8.1 – Network Layer Characteristics
8.1.5 – Best Effort

:::

# Network Layer CharacteristicsMedia Independent



* _IP is media Independent: Operation is independent of the medium \(i\.e\.\, copper\, fiber\-optic\, or wireless\) carrying the data\._


![](t7-network-layer-img/t7-network-layer-v6_5.png)



  * IP does not concern itself with the type of frame required at the data link layer or the media type at the physical layer\.
  * <span style="color:#ff0000">As shown in the figure\, IP packets can be sent over any media type: copper\, fiber\, or wireless\.</span>
::: {.notes}

8 – Network Layer
8.1 – Network Layer Characteristics
8.1.6 – Media Independent
8.1.7 Check Your Understanding – IP Characteristics

:::

# IPv4 PacketIPv4 Packet Header

Diagram is read from left to right\, 4 bytes per line

_The two most commonly referenced fields are the source and destination IP addresses_ \.

These fields identify where the packet is coming from and where it is going\.

Typically\,  _these addresses do not change while travelling from the source to the destination\._

![](t7-network-layer-img/t7-network-layer-v6_6.png)

::: {.notes}

8 – Network Layer
8.2 – IPv4 Packet
8.2.1 – IPv4 Packet Header

:::

# IPv4 PacketIPv4 Packet Header Fields

Significant fields in the IPv4 header:

| Function | Description |
| :-: | :-: |
| __Version__ | This will be for v4\, as opposed to v6\, a 4 bit field= 0100 |
| __Differentiated Services__ | <span style="color:#ff0000">Used for </span>  <span style="color:#ff0000">QoS</span> : DiffServ – DS field or the older IntServ – ToS or Type of Service |
| __Header Checksum__ | Detect corruption in the IPv4 header |
| __Time to Live \(TTL\)__ | <span style="color:#ff0000">Layer 3 hop count\. When it becomes zero the router</span>  <span style="color:#ff0000"> will discard the packet\.</span> |
| __Protocol__ | I\.D\.s next level protocol: ICMP\, TCP\, UDP\, etc\. |
| <span style="color:#ff0000"> __Source IPv4 Address__ </span> | 32 bit source address |
| <span style="color:#ff0000"> __Destination IPv4 Address__ </span> | 32 bit destination address |

::: {.notes}

8 – Network Layer
8.2 – IPv4 Packet
8.2.2 – IPv4 Packet Header Fields

:::

# IPv6 PacketsLimitations of IPv4



* <span style="color:#ff0000">IPv4 address depletion </span> – We have basically run out of IPv4 addressing\.
* <span style="color:#ff0000">Lack of end\-to\-end connectivity </span> – To make IPv4 survive this long\, private addressing and NAT were created\. This ended direct communications with public addressing\.
* <span style="color:#ff0000">Increased network complexity </span> – NAT was meant as temporary solution and creates issues on the network as a side effect of manipulating the network headers addressing\.  <span style="color:#ff0000">NAT causes latency and troubleshooting issues</span> \.
::: {.notes}

8 – Network Layer
8.3 – IPv6 Packets
8.3.1 – Limitations of IPv4


:::

# IPv6 PacketsIPv6 Overview

![](t7-network-layer-img/t7-network-layer-v6_7.png)



* Developed to overcomes the limitations of IPv4\.
* <span style="color:#ff0000">IPv6 improvements:</span>
  * <span style="color:#ff0000">Increased address space </span> – based on 128 bit address\, not 32 bits
  * <span style="color:#ff0000">Improved packet handling </span> – simplified header with fewer fields
  * <span style="color:#ff0000">Eliminates the need for NAT </span> – since there is a huge amount of addressing\, there is no need to use private addressing internally and be mapped to a shared public address


![](t7-network-layer-img/t7-network-layer-v6_8.png)

::: {.notes}

8 – Network Layer
8.3 – IPv6 Packets
8.3.2 –  IPv6 Overview

:::

# IPv6 PacketsFields in the IPv6 Packet Header

![](t7-network-layer-img/t7-network-layer-v6_9.png)



* The IPv6 header is simplified\, but not smaller\.
* The header is fixed  <span style="color:#ff0000">at 40 Bytes</span>  long\.
* Some IPv4 fields were removed to improve performance:
  * Flag
  * Fragment Offset
  * Header Checksum
::: {.notes}

8 – Network Layer
8.3 – IPv6 Packets
8.3.3 –  IPv4 Packet Header Fields in the IPv6 Packet Header

:::

# IPv6 PacketsIPv6 Packet Header



* Significant fields in the IPv6 header:


| Function | Description |
| :-: | :-: |
| __Version__ | This will be for v6\, as opposed to v4\, a 4 bit field= 0110 |
| __Traffic Class__ | Used for QoS: Equivalent to DiffServ – DS field |
| __Flow Label__ | Informs device to handle identical flow labels the same way\, 20 bit field |
| __Payload Length__ | This 16\-bit field indicates the length of the data portion or payload of the IPv6 packet |
| __Next Header__ | I\.D\.s next level protocol: ICMP\, TCP\, UDP\, etc\. |
| __Hop Limit__ | Replaces TTL field Layer 3 hop count |
| __Source IPv6 Address__ | 128 bit source address |
| __Destination IPV6 Address__ | 128 bit destination address |

::: {.notes}

8 – Network Layer
8.3 – IPv6 Packets
8.3.4 – IPv6 Packet Header

:::

# How a Host RoutesHost Forwarding Decision



* Each host device creates its own routing table\.
* A host can send packets to the following destinations:
  * Itself –  <span style="color:#ff0000">127\.0\.0\.1</span>  \(IPv4\) – the special address of the  <span style="color:#ff0000">loopback interface</span>
  * Local Hosts – on the same LAN
  * Remote Hosts – on the different LANs
* <span style="color:#ff0000">The source device determines whether the destination is local or remote by comparing its own IP address with the destination IP address\.</span>
* <span style="color:#0033cc">Remote traffic is forwarded directly to the </span>  <span style="color:#0033cc"> _default gateway _ </span>  <span style="color:#0033cc">on the LAN\.</span>


![](t7-network-layer-img/t7-network-layer-v6_10.png)

Default Gateway

<span style="color:#ff0000">Intermediate Device</span>

::: {.notes}

8 – Network Layer
8.4 – How a Host Routes
8.4.1 – Host Forwarding Decision (Cont.)

:::

# How a Host RoutesDefault Gateway



* A router or layer 3 switch can be a default\-gateway\.
* <span style="color:#0033cc">Features of a default gateway \(DGW\)</span> :
  * It must have an IP address in the same range as the rest of the LAN\.
  * It can accept data from the LAN and forward traffic to other networks\.
* <span style="color:#ff0000">If a device has no default gateway or a bad default gateway\, its traffic will not be able to leave the LAN\.</span>


![](t7-network-layer-img/t7-network-layer-v6_11.png)

__Local Network__

192\.168\.10\.0/24

The host will know the default gateway either statically or through DHCP in IPv4\.

All devices on the LAN use the DGW to send traffic remotely\.

::: {.notes}

8 – Network Layer
8.4 – How a Host Routes
8.4.2 – Default Gateway

:::

# How a Host Routes Host Routing Tables

![](t7-network-layer-img/t7-network-layer-v6_12.png)



* Use  <span style="color:#ff0000">route print </span> or  <span style="color:#ff0000">netstat \-r</span>  to display the routing table\.
* Three sections:
  * Interface List and MAC addressing
  * IPv4 Routing Table
  * IPv6 Routing Table


IPv4 Routing Table for PC1

![](t7-network-layer-img/t7-network-layer-v6_13.png)

<span style="color:#ffc000">Used to determine which route is used if there are more than one route to the same destination\.</span>

Default gateway for PC1

::: {.notes}

8 – Network Layer
8.4 – How a Host Routes
8.4.4 – Host Routing Tables
8.4.5 – Check Your Understanding – How a Host Routes


:::

# Introduction to RoutingRouter Packet Forwarding Decision

![](t7-network-layer-img/t7-network-layer-v6_14.png)



* _What happens when the router receives the frame from the host device?_


__R1 Routing Table__

![](t7-network-layer-img/t7-network-layer-v6_15.png)

<span style="color:#000000"> _Packet arrives on the Gigabit Ethernet 0/0/0 interface of router R1\. R1 de\-encapsulates the Layer 2 Ethernet header and trailer\._ </span>

<span style="color:#000000"> _Router R1 examines the destination IPv4 address of the packet and searches for the best match in its IPv4 routing table\. The route entry indicates that this packet is to be forwarded to router R2\._ </span>

<span style="color:#000000"> _Router R1 encapsulates the packet into a _ </span>  _new Ethernet header and trailer_  <span style="color:#000000"> _\, and forwards the packet to the next hop router R2\._ </span>

::: {.notes}

8 – Network Layer
8.5 – Introduction to Routing
8.5.1 – Router Packet Forwarding Decision

:::

# Introduction to RoutingIP Router Routing Table



* There three  <span style="color:#0033cc">types of routes </span> in a routing table:
* __Directly Connected networks __ –  <span style="color:#ff0000">Are automatically added by the router\, provided the interface is active and has IP addressing\.</span>
* __Remote networks__  – Routes that the router does not have a direct connection and may be  <span style="color:#ff0000">learned:</span>
  * <span style="color:#ff0000">Manually – </span>  <span style="color:#ff0000">with a static route</span>
  * <span style="color:#ff0000">Dynamically </span> –  <span style="color:#ff0000">by using a dynamic routing protocol</span>
* __Default Route __ –  <span style="color:#ff0000">a gateway of last resort</span> \, used when there is not a match in the routing table


![](t7-network-layer-img/t7-network-layer-v6_16.png)

::: {.notes}

8 – Network Layer
8.5 – Introduction to Routing
8.5.2 – IP Router Routing Table

:::

# Introduction to RoutingStatic Routing

![](t7-network-layer-img/t7-network-layer-v6_17.png)

Static Route Characteristics:

Must be  <span style="color:#ff0000">configured manually</span>

Must be  <span style="color:#ff0000">adjusted manually</span>  by the administrator  <span style="color:#ff0000">when there is a change in the topology</span>

<span style="color:#ff0000">Good for small non\-redundant networks</span>

Often used in conjunction with a dynamic routing protocol for configuring a default route

<span style="color:#c00000">R1 is configured with a static route to reach the 10\.1\.1\.0l24 network\.  If this path changes\, R1 will require a new static route\.</span>

![](t7-network-layer-img/t7-network-layer-v6_18.png)

<span style="color:#c00000">If the route from R1 via R2 is no longer available\, a new static route via R3 would need to be configured\.</span>

::: {.notes}

8 – Network Layer
8.5 – Introduction to Routing
8.5.3 – Static Routing

:::

# Introduction to RoutingDynamic Routing

![](t7-network-layer-img/t7-network-layer-v6_19.png)

Dynamic Routes Automatically:

Discover remote networks

Maintain up\-to\-date information

Choose the best path to the destination

Find new best paths when there is a topology change

R1 is using the OSPF routing protocol to let R2 know about the 192\.168\.10\.0/24 network\.

R2 is using the OSPF routing protocol to let R1 know about the 10\.1\.1\.0/24 network\.

![](t7-network-layer-img/t7-network-layer-v6_20.png)

<span style="color:#c00000">R1\, R2\, and R3 are using the OSPF dynamic routing protocol\.  </span>

<span style="color:#c00000">If there is network topology change\, they can automatically adjust to find a new path\.</span>

::: {.notes}

8 – Network Layer
8.5 – Introduction to Routing
8.5.4 – Dynamic Routing

:::

# Introduction to RoutingIntroduction to an IPv4 Routing Table

![](t7-network-layer-img/t7-network-layer-v6_21.png)

![](t7-network-layer-img/t7-network-layer-v6_22.png)



* The  <span style="color:#ff0000"> _show ip route _ </span> command displays:
* <span style="color:#0033cc">Route sources:</span>
  * <span style="color:#0033cc">L</span>  \- Directly connected local interface IP address
  * <span style="color:#0033cc">C</span>  – Directly connected network
  * <span style="color:#0033cc">S</span>  – Static route\, manually configured
  * <span style="color:#0033cc">O</span>  – OSPF
  * <span style="color:#0033cc">D</span>  – EIGRP
* <span style="color:#0033cc">Types of routes:</span>
  * Directly Connected –  <span style="color:#0033cc">C</span>  and  <span style="color:#0033cc">L</span>
  * <span style="color:#ff0000">Remote Routes </span> –  <span style="color:#ff0000">O</span> \,  <span style="color:#0033cc">D</span> \, etc\.
  * Default Routes –  <span style="color:#0033cc">S\*</span>
::: {.notes}

8 – Network Layer
8.5 – Introduction to Routing
8.5.6 – Introduction to an IPv4 Routing Table
8.5.7 – Check Your Understanding – Introduction to Routing


:::

# Configure Initial Router SettingsBasic Router Configuration Example

R1\(config\)\#  __hostname R1__

R1\(config\)\#  __enable secret class__

R1\(config\)\#  __line console 0__

R1\(config\-line\)\#  __password cisco__

R1\(config\-line\)\#  __login__

R1 __\(__ config\-line\)\#  __line vty 0 4__

R1\(config\-line\)\#  __password cisco__

R1\(config\-line\)\#  __login__

R1\(config\-line\)\#  __transport input ssh telnet__

R1\(config\-line\)\#  __exit__

R1\(config\)\#  __service password encryption__

R1\(config\)\#  __banner motd \#__

Enter TEXT message\. End with a new line and the \#

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

WARNING: Unauthorized access is prohibited\!

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

R1\#  __copy running\-config startup\-config__

<span style="color:#000000">Commands for basic router configuration</span>

<span style="color:#000000">Configuration is saved to NVRAM\.</span>

::: {.notes}

10 – Basic Router Configuration
10.1 – Configure Initial Router Settings
10.1.2 – Basic Routing Configuration Example
10.1.3 - Syntax Checker – Configure Initial Router Settings

:::

# Configure InterfacesConfigure Router Interfaces Example

![](t7-network-layer-img/t7-network-layer-v6_23.png)

<span style="color:#0033cc"> __The commands to configure interface G0/0/0 on R1:__ </span>

R1\(config\)\#  __interface gigabitEthernet 0/0/0__

R1\(config\-if\)\#  __description Link to LAN__

R1\(config\-if\)\#  <span style="color:#ffc000"> __ip__ </span>  __ address 192\.168\.10\.1 255\.255\.255\.0__

R1\(config\-if\)\#  <span style="color:#ffc000"> __ipv6__ </span>  __ address 2001:db8:acad:10::1/64__

R1\(config\-if\)\#  <span style="color:#ff0000"> __no shutdown __ </span>

R1\(config\-if\)\#  __exit__

R1\(config\)\#

\*Aug  1 01:43:53\.435: %LINK\-3\-UPDOWN: Interface GigabitEthernet0/0/0\, changed state to down

\*Aug  1 01:43:56\.447: %LINK\-3\-UPDOWN: Interface GigabitEthernet0/0/0\, changed state to up

\*Aug  1 01:43:57\.447: %LINEPROTO\-5\-UPDOWN: Line protocol on Interface GigabitEthernet0/0/0\, changed state to up

adds information about the network connected to the interface

<span style="color:#ffc000">activates the interface</span>

::: {.notes}

10 – Basic Router Configuration
10.2 – Configure Interfaces
10.2.2 – Configure Router Interfaces Example

:::

# Configure InterfacesVerify Interface Configuration

<span style="color:#000000">To verify interface configuration or to view status of all interfaces use the </span>  <span style="color:#ff0000"> __show ip interface brief __ </span>  <span style="color:#000000">and </span>  <span style="color:#000000"> __show ipv6 interface brief __ </span>  <span style="color:#000000">commands shown here:</span>

<span style="color:#ffc000">R1\#  </span>  <span style="color:#ffc000"> __show ip interface brief__ </span>

Interface              IP\-Address      OK? Method Status                Protocol

GigabitEthernet0/0/0   192\.168\.10\.1    YES manual up                    up

GigabitEthernet0/0/1   209\.165\.200\.225 YES manual up                    up

Vlan1                  unassigned      YES unset  administratively down down

<span style="color:#ffc000">R1\#  </span>  <span style="color:#ffc000"> __show ipv6 interface brief__ </span>

GigabitEthernet0/0/0       \[up/up\]

FE80::201:C9FF:FE89:4501

2001:DB8:ACAD:10::1

GigabitEthernet0/0/1       \[up/up\]

FE80::201:C9FF:FE89:4502

2001:DB8:FEED:224::1

Vlan1                      \[administratively down/down\]

unassigned

::: {.notes}

10 – Basic Router Configuration
10.2 – Configure Interfaces
10.2.3 – Verify Interface Configuration

:::

# Configure the Default GatewayDefault Gateway on a Host

![](t7-network-layer-img/t7-network-layer-v6_24.png)

<span style="color:#000000">The default gateway is used when a host sends a packet to a device on another network\.</span>

<span style="color:#ff0000">The default gateway address is generally the router interface address attached to the local network of the host\.</span>

<span style="color:#000000">To reach PC3\, PC1 addresses a packet with the IPv4 address of PC3\, but forwards the packet to its default gateway\, the G0/0/0 interface of R1\.</span>

<span style="color:#ff0000">Network address of LAN1</span>

<span style="color:#ff0000"> __Note__ </span>  <span style="color:#ff0000">: The IP address of the host and the router interface must be in the same network\.</span>

::: {.notes}

10 – Basic Router Configuration
10.3 – Configure the Default Gateway
10.3.1 – Default Gateway on a Host

:::

![](t7-network-layer-img/t7-network-layer-v6_25.png)

<span style="color:#ff0000">A switch must have a default gateway address configured to </span>  <span style="color:#0033cc">remotely </span>  <span style="color:#ff0000">manage the switch </span>  <span style="color:#0033cc">from another network</span>  <span style="color:#ff0000">\. </span>

Configured by using the  <span style="color:#ff0000"> __ip__ </span>  <span style="color:#ff0000"> __ default\-gateway __ </span> command\.

::: {.notes}

10 – Basic Router Configuration
10.3 – Configure the Default Gateway
10.3.2 – Default Gateway on a Switch
10.3.3 – Syntax Checker – Configure the Default Gateway

:::

